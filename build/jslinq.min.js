//! jslinq
//! Another LINQ provider for Javascript
//! version : 1.0.7
//! authors : maurobussini
//! license : MIT
//! built   : 2015-02-02
//! https://github.com/maurobussini/jslinq
!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.jslinq=b()}(this,function(){function a(a){if(!a)throw new Error("Provided data is invalid");if(!(a instanceof Array))throw new Error("Provided data is not a valid array");return this.items=a,this.select=c,this.where=b,this.groupBy=d,this.join=e,this.intersect=u,this.distinct=f,this.orderBy=g,this.orderByDescending=h,this.selectMany=i,this.singleOrDefault=j,this.firstOrDefault=k,this.lastOrDefault=l,this.any=m,this.all=n,this.toList=o,this.count=p,this.skip=q,this.take=r,this.max=s,this.min=t,this.remove=v,this}function b(b){if(!b)throw new Error("Expression is invalid");for(var c=[],d=0;d<this.items.length;d++){var e=b(this.items[d]);e&&c.push(items[d])}return new a(c)}function c(b){if(!b)throw new Error("Expression is invalid");for(var c=[],d=0;d<this.items.length;d++){var e=b(this.items[d]);c.push(e)}return new a(c)}function d(b){if(!b)throw new Error("Expression is invalid");for(var c=[],d=0;d<this.items.length;d++){for(var e=b(this.items[d]),f=null,g=0;g<c.length;g++)if(c[g].key==e){f=c[g];break}f||(f={key:e,count:0},c.push(f)),f.count++}return new a(c)}function e(b){if(!b)return new a(this.items);for(var c=[],d=0;d<this.items.length;d++)c.push(this.items[d]);for(var e=0;e<b.length;e++)c.push(b[e]);return new a(c)}function f(){for(var b=[],c=0;c<this.items.length;c++){for(var d=!1,e=0;e<b.length;e++)if(b[e]==this.items[c]){d=!0;break}d||b.push(this.items[c])}return new a(b)}function g(b){if(!b)throw new Error("Expression is invalid");var c=function(a,c){var d=b(a),e=b(c);return e>d?-1:d>e?1:0},d=this.items.sort(c);return new a(d)}function h(b){if(!b)throw new Error("Expression is invalid");var c=a(this.items).orderBy(b).toList(),d=c.reverse();return new a(d)}function i(b){if(!b)throw new Error("Expression is invalid");for(var c=[],d=0;d<this.items.length;d++){var e=b(this.items[d]);if(!e){c.push(e);break}for(var f=0;f<e.length;f++)c.push(e[f])}return new a(c)}function j(b){var c;if(c=b?a(this.items).where(b).toList():this.items,0==c.length)return null;if(1==c.length)return c[0];throw new Error("Sequence contains "+c.length+" matching elements")}function k(b){var c;return c=b?a(this.items).where(b).toList():this.items,0==c.length?null:c[0]}function l(b){var c;return c=b?a(this.items).where(b).toList():this.items,0==c.length?null:c[c.length-1]}function m(b){var c;return c=b?a(this.items).where(b).toList():this.items,c.length>0}function n(b){var c;return c=b?a(this.items).where(b).toList():this.items,c.length==this.items.length}function o(){return this.items}function p(){return this.items.length}function q(b){if(0>b)throw new Error("Value must be greater or equals zero");var c=this.items.slice(b);return new a(c)}function r(b){if(0>b)throw new Error("Value must be greater or equals zero");var c=this.items.slice(0,b);return new a(c)}function s(b){var c;return c=b?a(this.items).select(b).toList():this.items,0==c.length?null:(c=a(c).orderBy(function(a){return a}).toList(),c[c.length-1])}function t(b){var c;return c=b?a(this.items).select(b).toList():this.items,0==c.length?null:(c=a(c).orderBy(function(a){return a}).toList(),c[0])}function u(b,c){if(!b)return new a([]);for(var d=[],e=0;e<this.items.length;e++)for(var f=this.items[e],g=0;g<b.length;g++){var h=b[g],i=!1;if(c){var j=c(f),k=c(h);i=j==k}else i=f==h;i&&d.push(f)}return new a(d)}function v(b){if(!b)return new a(this.items);for(var c=0;c<this.items.length;c++)if(this.items[c]==b){var d=this.items.indexOf(b);this.items.splice(d,1)}return new a(this.items)}return a});